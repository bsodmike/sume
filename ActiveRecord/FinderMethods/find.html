        <div class="method">
          <div class="title method-title" id="method-i-find" style="">
            
              <a name="method-i-find"></a><b>find</b>(*args)
            
          </div>
          
          
            <div class="description">
              <p>Find operates with four different retrieval approaches:</p>
<ul><li>
<p>Find by id - This can either be a specific id (1), a list of ids (1, 5, 6),
or an array of ids ([5, 6, 10]). If no record can be found for all of the
listed ids, then <a href="RecordNotFound.html">RecordNotFound</a> will be
raised.</p>
</li><li>
<p>Find first - This will return the first record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, <tt>nil</tt> is returned. Use <tt>Model.find(:first,
*args)</tt> or its shortcut <tt>Model.first(*args)</tt>.</p>
</li><li>
<p>Find last - This will return the last record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, <tt>nil</tt> is returned. Use <tt>Model.find(:last,
*args)</tt> or its shortcut <tt>Model.last(*args)</tt>.</p>
</li><li>
<p>Find all - This will return all the records matched by the options used. If
no records are found, an empty array is returned. Use <tt>Model.find(:all,
*args)</tt> or its shortcut <tt>Model.all(*args)</tt>.</p>
</li></ul>

<p>All approaches accept an options hash as their last parameter.</p>

<h4>Options</h4>
<ul><li>
<p><tt>:conditions</tt> - An SQL fragment like “administrator = 1”,
<tt>["user_name = ?", username]</tt>, or <tt>["user_name =
:user_name", { :user_name =&gt; user_name }]</tt>. See conditions in
the intro.</p>
</li><li>
<p><tt>:order</tt> - An SQL fragment like “created_at DESC, name”.</p>
</li><li>
<p><tt>:group</tt> - An attribute name by which the result should be grouped.
Uses the <tt>GROUP BY</tt> SQL-clause.</p>
</li><li>
<p><tt>:having</tt> - Combined with <tt>:group</tt> this can be used to filter
the records that a <tt>GROUP BY</tt> returns. Uses the <tt>HAVING</tt>
SQL-clause.</p>
</li><li>
<p><tt>:limit</tt> - An integer determining the limit on the number of rows
that should be returned.</p>
</li><li>
<p><tt>:offset</tt> - An integer determining the offset from where the rows
should be fetched. So at 5, it would skip rows 0 through 4.</p>
</li><li>
<p><tt>:joins</tt> - Either an SQL fragment for additional joins like “LEFT
JOIN comments ON comments.post_id = id” (rarely needed), named
associations in the same form used for the <tt>:include</tt> option, which
will perform an <tt>INNER JOIN</tt> on the associated table(s), or an array
containing a mixture of both strings and named associations. If the value
is a string, then the records will be returned read-only since they will
have attributes that do not correspond to the table’s columns. Pass
<tt>:readonly =&gt; false</tt> to override.</p>
</li><li>
<p><tt>:include</tt> - Names associations that should be loaded alongside. The
symbols named refer to already defined associations. See eager loading
under <a href="Associations.html">Associations</a>.</p>
</li><li>
<p><tt>:select</tt> - By default, this is “*” as in “SELECT * FROM”,
but can be changed if you, for example, want to do a join but not include
the joined columns. Takes a string with the SELECT SQL fragment (e.g.
“id, name”).</p>
</li><li>
<p><tt>:from</tt> - By default, this is the table name of the class, but can
be changed to an alternate table name (or even the name of a database
view).</p>
</li><li>
<p><tt>:readonly</tt> - Mark the returned records read-only so they cannot be
saved or updated.</p>
</li><li>
<p><tt>:lock</tt> - An SQL fragment like “FOR UPDATE” or “LOCK IN SHARE
MODE”. <tt>:lock =&gt; true</tt> gives connection’s default exclusive
lock, usually “FOR UPDATE”.</p>
</li></ul>

<h4>Examples</h4>

<pre class="javascript" data-result="[object Object]" data-second_best="[object Object]"># find by id
Person.find(<span class="number">1</span>)       # <span class="keyword">return</span>s the object <span class="keyword">for</span> ID = <span class="number">1</span>
Person.find(<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>) # <span class="keyword">return</span>s an array <span class="keyword">for</span> objects <span class="keyword">with</span> IDs <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>)
Person.find([<span class="number">7</span>, <span class="number">17</span>]) # <span class="keyword">return</span>s an array <span class="keyword">for</span> objects <span class="keyword">with</span> IDs <span class="keyword">in</span> (<span class="number">7</span>, <span class="number">17</span>)
Person.find([<span class="number">1</span>])     # <span class="keyword">return</span>s an array <span class="keyword">for</span> the object <span class="keyword">with</span> ID = <span class="number">1</span>
Person.where(<span class="string">"administrator = 1"</span>).order(<span class="string">"created_on DESC"</span>).find(<span class="number">1</span>)</pre>

<p>Note that returned records may not be in the same order as the ids you
provide since database rows are unordered. Give an explicit <tt>:order</tt>
to ensure the results are sorted.</p>

<h4>Examples</h4>

<pre class="ruby" data-result="[object Object]" data-second_best="[object Object]"><span class="comment"># find first</span>
<span class="constant">Person</span>.<span class="identifier"><span class="keymethods">first</span></span> <span class="comment"># returns the first object fetched by SELECT * FROM people</span>
<span class="constant">Person</span>.<span class="identifier">where</span>([<span class="string">"user_name = ?"</span>, <span class="identifier">user_name</span>]).<span class="identifier"><span class="keymethods">first</span></span>
<span class="constant">Person</span>.<span class="identifier">where</span>([<span class="string">"user_name = :u"</span>, { <span class="symbol">:<span class="identifier">u</span></span> =&gt; <span class="identifier">user_name</span> }]).<span class="identifier"><span class="keymethods">first</span></span>
<span class="constant">Person</span>.<span class="identifier">order</span>(<span class="string">"created_on DESC"</span>).<span class="identifier">offset</span>(<span class="number">5</span>).<span class="identifier"><span class="keymethods">first</span></span>

<span class="comment"># find last</span>
<span class="constant">Person</span>.<span class="identifier"><span class="keymethods">last</span></span> <span class="comment"># returns the last object fetched by SELECT * FROM people</span>
<span class="constant">Person</span>.<span class="identifier">where</span>([<span class="string">"user_name = ?"</span>, <span class="identifier">user_name</span>]).<span class="identifier"><span class="keymethods">last</span></span>
<span class="constant">Person</span>.<span class="identifier">order</span>(<span class="string">"created_on DESC"</span>).<span class="identifier">offset</span>(<span class="number">5</span>).<span class="identifier"><span class="keymethods">last</span></span>

<span class="comment"># find all</span>
<span class="constant">Person</span>.<span class="identifier">all</span> <span class="comment"># returns an array of objects for all the rows fetched by SELECT * FROM people</span>
<span class="constant">Person</span>.<span class="identifier">where</span>([<span class="string">"category IN (?)"</span>, <span class="identifier">categories</span>]).<span class="identifier">limit</span>(<span class="number">50</span>).<span class="identifier">all</span>
<span class="constant">Person</span>.<span class="identifier">where</span>({ <span class="symbol">:<span class="identifier">friends</span></span> =&gt; [<span class="string">"Bob"</span>, <span class="string">"Steve"</span>, <span class="string">"Fred"</span>] }).<span class="identifier">all</span>
<span class="constant">Person</span>.<span class="identifier">offset</span>(<span class="number">10</span>).<span class="identifier">limit</span>(<span class="number">10</span>).<span class="identifier">all</span>
<span class="constant">Person</span>.<span class="identifier">includes</span>([<span class="symbol">:<span class="identifier">account</span></span>, <span class="symbol">:<span class="identifier">friends</span></span>]).<span class="identifier">all</span>
<span class="constant">Person</span>.<span class="identifier">group</span>(<span class="string">"category"</span>).<span class="identifier">all</span></pre>

<p>Example for find with a lock: Imagine two concurrent transactions: each
will read <tt>person.visits == 2</tt>, add 1 to it, and save, resulting in
two saves of <tt>person.visits = 3</tt>.  By locking the row, the second
transaction has to wait until the first is finished; we get the expected
<tt>person.visits == 4</tt>.</p>

<pre class="ruby" data-result="[object Object]" data-second_best="[object Object]"><span class="constant">Person</span>.<span class="identifier">transaction</span> <span class="identifier"><span class="keyword">do</span></span>
  <span class="identifier">person</span> = <span class="constant">Person</span>.<span class="identifier">lock</span>(<span class="identifier"><span class="keyword">true</span></span>).<span class="identifier"><span class="keymethods">find</span></span>(<span class="number">1</span>)
  <span class="identifier">person</span>.<span class="identifier">visits</span> += <span class="number">1</span>
  <span class="identifier">person</span>.<span class="identifier">save!</span>
<span class="identifier"><span class="keyword">end</span></span></pre>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-find_source')" id="l_method-i-find_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/44a5849cfb0b83085244f14079d3d4b40be9a295/activerecord/lib/active_record/relation/finder_methods.rb#L95" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-find_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/relation/finder_methods.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">find</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span>*<span class="ruby-identifier">block_args</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span>(*<span class="ruby-identifier">block_args</span>) } <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">apply_finder_options</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">find</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:first</span>, <span class="ruby-value">:last</span>, <span class="ruby-value">:all</span>
      <span class="ruby-identifier">send</span>(<span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">find_with_ids</span>(*<span class="ruby-identifier">args</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
